(function(b){var c=io.connect("https://hsglib.com"),g=null;window.onunload=function(){c.disconnect()};Object.keys||(Object.keys=function(b){var c=[],f;for(f in b)b.hasOwnProperty(f)&&c.push(f);return c});Array.prototype.indexOf||(Array.prototype.indexOf=function(b,c){var f=this.length>>>0,d=Number(c)||0,d=0>d?Math.ceil(d):Math.floor(d);for(0>d&&(d+=f);d<f;d++)if(d in this&&his[d]===b)return d;return-1});var r=function(){var b=0;return function(c,f){clearTimeout(b);b=setTimeout(c,f)}}();b(function(){var q=
function(a,b,c,m){var l=c=0,d=!1;if("undefined"===typeof b||null===b)b=2;a=a.toString();!1!==m&&(a=a.replace(/&/g,"&amp;"));a=a.replace(/</g,"&lt;").replace(/>/g,"&gt;");m={ENT_NOQUOTES:0,ENT_HTML_QUOTE_SINGLE:1,ENT_HTML_QUOTE_DOUBLE:2,ENT_COMPAT:2,ENT_QUOTES:3,ENT_IGNORE:4};0===b&&(d=!0);if("number"!==typeof b){b=[].concat(b);for(l=0;l<b.length;l++)0===m[b[l]]?d=!0:m[b[l]]&&(c|=m[b[l]]);b=c}b&m.ENT_HTML_QUOTE_SINGLE&&(a=a.replace(/'/g,"&#039;"));d||(a=a.replace(/"/g,"&quot;"));return a},n=function(){b(".dashBoardText").scrollTop(b(".dashBoardText")[0].scrollHeight)},
f=function(a,h,c){c||(c="/img/green_c.png");a='<div class="checkMsgSwap">'+('<div class="checkMsg"><img src="'+c+'" class="width_24" alt="checkBox" />'+decodeURIComponent(a)+"</div>");a+="</div>";b(".checkMsgSwap").remove();b("body").append(a);1==h&&d(b(".checkMsgSwap"))},d=function(a){r(function(){a.fadeOut("slow",function(){a.remove()})},2500)},e=function(a,c,p,d){1>b("._layerOveray_").length&&"0"==b(".gameJoinCheckDiv").length&&b("body").append('<div class="_layerOveray_"></div>');a=400>=b(window).width()?
250:a||.8*b(window).width();c=400>=b(window).width()?parseInt(c)+40:c||.8*b(window).height();p=p||b("._layer_");d=d||b("._layerOveray_");var l=b(window).scrollTop()+(b(window).height()-c)/2,e=b(window).width()/2-a/2;d.css({width:b(document).width()+"px",height:b(document).height()+"px"});p.css({top:l,left:400>=b(window).width()?parseInt(e)-10:e,width:a,height:c})},k=function(a){b("._layer_,._layerOveray_").remove();a='<div class="_layer_">'+('<div class="gameJoinCheckDiv">'+a+"</div>")+"</div>";b("body").append(a)};
b(window).resize(function(){0<b("._layer_").length&&e(b("._layer_").width(),b("._layer_").height())}).resize();c.on("connect",function(){c.emit("addClient","Anonymous")});c.on("addDashboad",function(a,c,d){a="<li>"+a+" : "+c+"</li>";b(".dashBoardText ul").append(decodeURIComponent(a));d&&(g=d,b('.tradeItem[data-uid="'+g+'"]').addClass("me").find("span").append("(\ubcf8\uc778)"));n()});c.on("updateClient",function(a,c){b(".tradeSwap").empty();b.each(a,function(a,c){var h;h='<div class="tradeItem" data-uid="'+
a+'">'+('<span class="nickNm">'+decodeURIComponent(c)+"</span>");h+="</div>";b(".tradeSwap").append(h)});b('.tradeItem[data-uid="'+g+'"]').addClass("me").find("span").append("(\ubcf8\uc778)");-1!=Object.keys(c).indexOf(g)&&b.each(c,function(a,c){var h="";"check"==c?h='<img src="/img/yellow_q.png" class="width_24" alt="\uccb4\ud06c\uc911" />':"agree"==c?h='<img src="/img/green_c.png" class="width_24" alt="\ub3d9\uc758" />':"disagree"==c&&(h='<img src="/img/red_x.png" class="width_24" alt="\ube44\ub3d9\uc758" />');
g!=a&&b('.tradeItem[data-uid="'+a+'"]').find("span").append(h)});n()});c.on("clickNotice",function(a){b(".dashBoardText ul").append('<li><span style="color:green;">[Notice]</span> : '+decodeURIComponent(a)+"</li>");f(a,!0);n()});c.on("existsNickName",function(a){b(".dashBoardText ul").append('<li><span style="color:red;">[Notice]</span> : '+a+"</li>");f(a,!1);n()});c.on("alreadyGame",function(){b(".tradeItem .width_24").remove();b("._layer_,._layerOveray_").remove()});c.on("otherUserCheck",function(a,
b){var c='<h2><span class="gameText">'+decodeURIComponent(a)+'</span> \ub2d8\uc774 <span class="gameText">'+decodeURIComponent(b)+"</span> \uac8c\uc784\uc744 \uc8fc\ucd5c \ud558\uc600\uc2b5\ub2c8\ub2e4.</h2>",c=c+'<h2>\ucc38\uc5ec \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? 5\ucd08 \uc774\ub0b4\uc5d0 \ucc38\uac00\uc5ec\ubd80\ub97c \uc120\ud0dd\ud558\uc138\uc694.</h2><p class="btnP"><button class="joinBtns defaultBtn" data-type="agree">\ucc38\uac00</button><button class="joinBtns defaultBtn" data-type="disagree">\uac70\ubd80</button></p>';
k(c);e(400,150)});c.on("joinAnswer",function(a){var c="agree"==a.status?"/img/green_c.png":"/img/red_x.png";b('.tradeItem[data-uid="'+a.uid+'"]').find("img").attr("src",c)});c.on("checkResult",function(a){var b="<h2>\ucd1d "+a.totalCnt+" \uba85\uc911 \ucc38\uc5ec\uc790\ub294 "+a.agreeCnt+" \uba85 \uc785\ub2c8\ub2e4.</h2>";1<parseInt(a.agreeCnt)?b=b+"<h2>\uac8c\uc784\uc744 \uc2dc\uc791 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?</h2>"+('<p class="btnP"><button class="gameWating defaultBtn" data-type="start" data-game-type="'+
a.gameCs+'">\uc2dc\uc791</button><button class="gameWating defaultBtn" data-type="cancel" data-game-type="'+a.gameCs+'">\ucde8\uc18c</button></p>'):(b+="<h2>\ub3d9\uc758 \uc778\uc6d0\uc774 \ubd80\uc871\ud558\uc5ec \uc8fc\ucd5c\ub97c \uc885\ub8cc\ud569\ub2c8\ub2e4.</h2>",b+='<p class="btnP"><button class="gameWating defaultBtn" data-type="cancel">\ub2eb\uae30</button></p>',c.emit("cancelGame"));k(b);e(400,130)});c.on("gameThrow",function(a){f(a,!0,"/img/red_p.png");b(".tradeItem img").remove();b("._layer_,._layerOveray_").remove()});
c.on("gameWating",function(a){k("<h2>"+a+"</h2>");e(400,40)});c.on("gameStart",function(a){k("<h2>"+a+"</h2>");e(400,40)});c.on("turnNotice",function(a,b){var c="<h2>"+decodeURIComponent(a)+"</h2>";b==g&&(c+='<p class="textP"><input type="text" class="sendNumberText noticeLayerDefaultText" /></p><p class="btnP"><button class="sendNumberBtn defaultBtn" data-type="cancel">\uc785\ub825</button></p>');k(c);e(400,b==g?140:60)});c.on("noTurnNotice",function(a){a='<h2 class="changeNunchiNum">'+decodeURIComponent(a)+
"</h2>";a+='<p class="textP"><input type="text" class="sendNunchiNumberText noticeLayerDefaultText" /></p><p class="btnP"><button class="sendNunchiNumberBtn defaultBtn" data-type="cancel">\uc785\ub825</button></p>';k(a);e(400,140);b(".sendNunchiNumberText").focus()});c.on("endGame",function(a){var c="";switch(a.gameCs){case "callUpDownGame":c='<h2><span class="gameText">'+decodeURIComponent(a.gameNm)+"</span> \uac8c\uc784\uc758 \uc2b9\uc790\ub294</h2>";c+='<h2><span class="gameText">'+decodeURIComponent(a.winNm)+
"</span> \ub2d8 \uc785\ub2c8\ub2e4. \ucd95\ud558 \ub4dc\ub9bd\ub2c8\ub2e4.</h2>";c+='<p class="btnP"><button class="winnerClose defaultBtn" data-type="cancel">\ub2eb\uae30</button></p>';break;case "callNunchiGame":c='<h2><span class="gameText">'+decodeURIComponent(a.gameNm)+'</span> \uac8c\uc784\uc758 \ud328\uc790\ub294 <span class="gameText">'+decodeURIComponent(a.loseNm)+"</span> \ub2d8 \uc785\ub2c8\ub2e4.</h2>",c+='<h2><span class="gameText">'+a.msg+"</span></h2>",c+='<p class="btnP"><button class="winnerClose defaultBtn" data-type="cancel">\ub2eb\uae30</button></p>'}k(c);
e(400,140);b(".tradeItem .width_24").remove()});c.on("changeNunchiNumber",function(a,c){b(".changeNunchiNum").html(decodeURIComponent(a)+" \ub2d8\uc774 [ "+c+" ] \ub97c \uc785\ub825 \ud558\uc168\uc2b5\ub2c8\ub2e4.")});b(this).on("click",".inputBtn",function(a){c.emit("sendText",q(b(".inputText").val()));b(".inputText").val("").focus()});b(this).on("click",".layerCloseBtn,.winnerClose",function(a){b("._layer_,._layerOveray_").remove()});b(this).on("click",".tradeItem",function(a){a=b(this).data("uid");
g==a?(a='<div class="_layer_"><div class="changeNickNameDiv"><h2>\ubcc0\uacbd\ud558\uc2e4 \ub2c9\ub124\uc784\uc744 \uc785\ub825\ud558\uc138\uc694.</h2>',a+='<p class="textP"><input type="text" class="changeNickNameText" /></p>',a+='<p class="btnP"><button class="changeNickNameBtn changeNickNameRegBtn">\ubcc0\uacbd</button><button class="changeNickNameBtn layerCloseBtn">\ub2eb\uae30</button></p>',a+="</div>",a+="</div>",b("body").append(a),b(".changeNickNameText").focus(),e(300,150)):c.emit("focusUser",
a)});b(this).on("keypress",".changeNickNameText",function(a){"13"==a.which&&b(".changeNickNameBtn").trigger("click")});b(this).on("click",".changeNickNameRegBtn",function(a){a.preventDefault();if(""==b(".changeNickNameText").val().replace(/\s*/g,""))return alert("\ub2c9\ub124\uc784\uc744 \uc785\ub825\ud558\uc138\uc694."),b(".changeNickNameText").focus(),!1;c.emit("changeNickName",q(b(".changeNickNameText").val()));b(".layerCloseBtn").trigger("click")});b(this).on("click",".checkMsgSwap",function(a){b(this).fadeOut("slow",
function(){b(this).remove()})});b(this).on("click",".helpBtn",function(a){a='<div class="_layer_"><div class="helpDiv"><h2>\ub3c4\uc6c0\ub9d0</h2>';a+='<p class="left"><span>* (\ubcf8\uc778) \ubc15\uc2a4\ub97c \ub204\ub974\uba74 \ub2c9\ub124\uc784\uc744 \ubcc0\uacbd \ud558\uc2e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</span></p>';a+='<p class="left"><span>* \ubcf8\uc778\uc744 \uc81c\uc678\ud55c \ud0c0\uc778\uc744 \ud074\ub9ad\ud558\uba74 \uc0c1\ub300\ubc29\uc5d0\uac8c \ud074\ub9ad\ud588\ub294\uc9c0 \uc54c\ub824\uc90d\ub2c8\ub2e4.</span></p>';
a+='<p class="btnP"><button class="layerCloseBtn">\ub2eb\uae30</button></p>';a+="</div>";a+="</div>";b("body").append(a);e(400,150)});b(this).on("click",".gameBtn",function(a){a='<div class="_layer_"><div class="gameChoiceDiv"><h2>\uac8c\uc784\ub9ac\uc2a4\ud2b8</h2>';a+='<div class="games" data-game-name="\uc5c5\ub2e4\uc6b4" data-game-class="callUpDownGame" data-min-user="3" data-owner-join="off"><img src="/img/updownGameIcon.png" class="width_48" alt="\uc5c5\ub2e4\uc6b4" /><h1>Up Down</h1></div>';
a+='<div class="games" data-game-name="\ub208\uce58" data-game-class="callNunchiGame" data-min-user="2" data-owner-join="on"><img src="/img/nunchiGameIcon.png" class="width_48" alt="\ub208\uce58" /><h1>\ub208\uce58\uac8c\uc784</h1></div>';a+='<p class="btnP"><button class="layerCloseBtn">\ub2eb\uae30</button></p>';a+="</div>";a+="</div>";b("body").append(a);e(171,200)});b(this).on("click",".games",function(a){a=b(this);if(b(".tradeItem").length<parseInt(a.data("min-user")))return alert("\uc811\uc18d\uc790\uac00 "+
a.data("min-user")+"\uba85 \uc774\uc0c1 \uc788\uc5b4\uc57c \uac00\ub2a5\ud569\ub2c8\ub2e4."),!1;confirm("[ "+a.data("game-name")+" ] \uc744 \uc8fc\ucd5c \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?\n\u203b\ucc38\uc5ec\uc790\uac00 \uc5c6\uc744\uacbd\uc6b0 \uc8fc\ucd5c\uac00 \uc790\ub3d9 \ucde8\uc18c \ub429\ub2c8\ub2e4.")&&(k("<h2>\ub2e4\ub978 \uc811\uc18d\uc790\uc5d0\uac8c \uac8c\uc784 \ucc38\uc5ec\uc5ec\ubd80\ub97c \uccb4\ud06c\uc911 \uc785\ub2c8\ub2e4.</h2>"),e(400,40),b(".tradeItem .nickNm").append('<img src="/img/yellow_q.png" class="width_24" alt="\uccb4\ud06c\uc911" />'),
b(".me .width_24").remove(),c.emit("userJoinCheck",{owner:g,gameNm:encodeURIComponent(a.data("game-name")),gameCs:a.data("game-class"),ownerJoin:a.data("owner-join")}))});b(this).on("click",".joinBtns",function(a){a=b(this).data("type");c.emit("userJoinType",{user:g,answer:a});"agree"==a?(k("<h2>\ub2e4\ub978 \uc811\uc18d\uc790\uc5d0\uac8c \uac8c\uc784 \ucc38\uc5ec\uc5ec\ubd80\ub97c \ub300\uae30\uc911 \uc785\ub2c8\ub2e4.</h2>"),e(400,40)):b("._layer_,._layerOveray_").remove()});b(this).on("click",
".gameWating",function(a){a=b(this);var d="";if("cancel"==a.data("type"))c.emit("cancelGame","\uc8fc\ucd5c\uc790\uac00 \uac8c\uc784\uc744 \ucde8\uc18c \ud558\uc600\uc2b5\ub2c8\ub2e4."),b(".tradeItem img").remove(),b("._layer_,._layerOveray_").remove();else switch(a.data("game-type")){case "callUpDownGame":d='<h2>1 \ubd80\ud130 500 \uc0ac\uc774\uc758 \uc22b\uc790\ub97c \uc785\ub825\ud558\uc138\uc694.</h2><p class="textP"><input type="text" class="upDownNumberText defaultTextP" /></p><p class="btnP"><button class="gameStart defaultBtn">\uc124\uc815</button></p>';
c.emit("settingGame","\uc8fc\ucd5c\uc790\uac00 \uc22b\uc790\ub97c \uc124\uc815\uc911 \uc785\ub2c8\ub2e4.");k(d);e(400,140);break;case "callNunchiGame":c.emit("startGame");break;default:c.emit("cancelGame","\uc798\ubabb\ub41c \uc811\uadfc \uc785\ub2c8\ub2e4.")}});b(this).on("keyup",".upDownNumberText,.sendNumberText,.sendNunchiNumberText",function(a){b(this).val(b(this).val().replace(/[^\d]/g,""))});b(this).on("keypress",".sendNunchiNumberText",function(a){"13"==a.which&&b(".sendNunchiNumberBtn").trigger("click")});
b(this).on("click",".gameStart",function(a){b(".upDownNumberText").val(b(".upDownNumberText").val().replace(/[^\d]/g,""));a=parseInt(b(".upDownNumberText").val());if(""==a)return alert("\uc22b\uc790\ub97c \uc785\ub825\ud558\uc138\uc694."),b(".upDownNumberText").focus(),!1;if(0>a||500<a)return alert("\uc22b\uc790 \ubc94\uc704\uac00 \ube44\uc815\uc0c1 \uc785\ub2c8\ub2e4.\n\n\ub2e4\uc2dc \uc785\ub825 \ud574\uc8fc\uc138\uc694."),b(".upDownNumberText").focus(),!1;confirm("\uc785\ub825\ud558\uc2e0 "+b(".upDownNumberText").val()+
" \ub85c \uc124\uc815 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&c.emit("startGame",b(".upDownNumberText").val())});b(this).on("click",".sendNumberBtn",function(){if(""==b(".sendNumberText").val())return alert("\uc22b\uc790\ub97c \uc785\ub825\ud558\uc138\uc694."),b(".sendNumberText").focus(),!1;c.emit("updownNumberSend",b(".sendNumberText").val())});b(this).on("click",".sendNunchiNumberBtn",function(){if(""==b(".sendNunchiNumberText").val())return alert("\uc22b\uc790\ub97c \uc785\ub825\ud558\uc138\uc694."),
b(".sendNunchiNumberText").focus(),!1;c.emit("sendNunchiNumber",b(".sendNunchiNumberText").val(),g);b(".sendNunchiNumberText").val("").focus()})})})(jQuery);